# NoteMemo 部署前检查清单

在将 NoteMemo 部署到 Vercel 平台之前，请确保完成以下检查项目，以确保应用程序能够正常运行。

## 1. 环境变量配置

- [ ] 设置 `ACCESS_CODES` 环境变量（多个访问码，用逗号分隔，如 `123456,654321,111111`）
- [ ] 设置 `ACCESS_CODE` 环境变量（单个访问码，如 `123456`）
- [ ] 设置 `ENABLE_SYNC=true` 环境变量（启用多设备同步功能）
- [ ] 确认 MongoDB Atlas 集成已添加，`MONGODB_URI` 环境变量已自动配置

## 2. 数据库配置

- [ ] 在 Vercel 项目中添加 MongoDB Atlas 集成
- [ ] 确认 MongoDB Atlas 集群已创建并运行
- [ ] **重要**：如果要求填写数据库名称，确保使用 `notememo`（全部小写）
- [ ] 确认网络访问设置允许从 Vercel 服务器访问数据库
- [ ] 确认数据库用户具有适当的权限

## 3. 代码检查

- [ ] 访问码验证逻辑正确（`src/lib/auth.ts`）
- [ ] 数据库连接逻辑正确（`src/lib/db.ts`）
- [ ] API 路由错误处理完善（`src/app/api/`）
- [ ] 客户端组件错误处理完善

## 4. 功能测试

- [ ] 使用默认访问码 `123456` 可以成功登录
- [ ] 使用其他配置的访问码可以成功登录
- [ ] 笔记创建、编辑、删除功能正常
- [ ] 分类创建、编辑、删除功能正常
- [ ] 搜索功能正常
- [ ] 多设备同步功能正常

## 5. 多设备同步测试

- [ ] 在设备 A 上创建笔记，在设备 B 上可以看到
- [ ] 在设备 A 上编辑笔记，在设备 B 上可以看到更新
- [ ] 在设备 A 上删除笔记，在设备 B 上也被删除
- [ ] 同步状态显示组件工作正常

## 6. 多用户支持测试

- [ ] 使用不同访问码登录，数据相互隔离
- [ ] 用户 A 的笔记在用户 B 的账户中不可见
- [ ] 用户 A 的分类在用户 B 的账户中不可见

## 7. 性能检查

- [ ] 页面加载速度合理
- [ ] 大量笔记时搜索性能良好
- [ ] 同步操作性能良好

## 8. 安全检查

- [ ] 访问码验证安全
- [ ] API 路由受到保护
- [ ] 没有敏感信息泄露

## 9. 部署后检查

- [ ] 访问 Vercel 部署的 URL 确认应用可以访问
- [ ] 使用访问码登录
- [ ] 创建、编辑、删除笔记
- [ ] 确认同步功能正常工作

## 10. 常见问题排查

### 访问码无法验证
- 检查环境变量是否正确配置
- 检查 `auth.ts` 中的验证逻辑

### 数据库连接失败
- 检查 MongoDB URI 是否正确
- 检查数据库名称是否正确设置为 `notememo`
- 检查网络访问设置
- 检查数据库用户权限

### 同步功能不工作
- 确认 `ENABLE_SYNC=true` 已设置
- 检查 API 路由日志
- 确认 MongoDB 连接正常

---

完成上述检查后，您的 NoteMemo 应用应该可以在 Vercel 平台上正常运行，支持多设备同步和多用户功能。 